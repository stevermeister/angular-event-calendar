!function(a){"use strict";var b=angular.module("calendar",["app-templates"]);a.app=b}(window),angular.module("calendar").controller("CalendarController",["$scope","CalendarService","$window",function(a,b,c){"use strict";a.events=b.setEvents(mocks.events);var d="layOutDay";c[d]=function(c){return angular.isArray(c)?(a.events=b.setEvents(c))&&a.$digest():c}}]),angular.module("calendar").directive("calendar",function(){"use strict";return{restrict:"E",templateUrl:"calendar/views/calendar.html",replace:!0}}),angular.module("calendar").service("CalendarService",["$window",function(a){"use strict";function b(a,b){return a.end>=b.end&&a.start<=b.start||a.end<=b.end&&a.start>=b.start||a.end<=b.end&&a.end>b.start||a.start>=b.start&&a.start<b.end}function c(a,c){for(var d=[],e=0;e<c.length;e++)b(a,g[c[e]])&&d.push(c[e]);return d}function d(a,b){for(var c=0;c<a.length;c++)e(g[a[c]],b)}function e(a,b){-1===a.siblings.indexOf(b)&&a.siblings.push(b)}function f(a){return!angular.isNumber(a.start)||!angular.isNumber(a.end)||a.start<0||a.end<0||a.start>720||a.end>720?!1:!0}var g=[],h=[];this.addEvent=function(b){if(!f(b))return a.console.error("Event dimensions are not correct: ("+b.start+", "+b.end+")"),!1;var i=g.length,j=[],k=[],l=!1;b.siblings=[],b.column=0,g.push(b);for(var m=0;m<h.length;m++)j=c(b,h[m]),0!==j.length||l?(e(b,m),k=k.concat(j)):(b.column=m,h[m].push(i),l=!0);return l||(b.column=h.length,h[h.length]=[i]),d(k,b.column),b},this.setEvents=function(a){g=[],h=[];for(var b=0;b<a.length;b++)this.addEvent(a[b]);return g}}]),angular.module("calendar").directive("eventBox",function(){"use strict";return{restrict:"E",templateUrl:"calendar/views/eventBox.html",replace:!0,link:function(a,b){b.css({top:a.event.start,width:(b.parent().width()-10)/(a.event.siblings.length+1),height:a.event.end-a.event.start||b.height(),left:a.event.column*b.parent().width()/(a.event.siblings.length+1)})}}}),angular.module("calendar").filter("midday",function(){"use strict";function a(a){return Math.floor(a/12)?"PM":"AM"}return a}),angular.module("calendar").filter("h12",function(){"use strict";function a(a){return a%12||12}return a}),angular.module("calendar").directive("timeline",function(){"use strict";return{restrict:"E",templateUrl:"calendar/views/timeline.html",link:function(a){a.timeline=[9,10,11,12,13,14,15,16,17,18,19,20,21]}}});var mocks=mocks||{};mocks.events=[{start:30,end:150},{start:540,end:600},{start:560,end:620},{start:610,end:670},{start:310,end:390},{start:340,end:400},{start:390,end:480},{start:60,end:120},{start:120,end:200}],angular.module("app-templates",["calendar/views/calendar.html","calendar/views/eventBox.html","calendar/views/timeline.html"]),angular.module("calendar/views/calendar.html",[]).run(["$templateCache",function(a){a.put("calendar/views/calendar.html",'<div class="calender_container">\n  <div class="calender">\n    <div class="calender_box">\n      <event-box\n          ng-repeat="event in events"></event-box>\n    </div>\n  </div>\n  <timeline></timeline>\n</div>')}]),angular.module("calendar/views/eventBox.html",[]).run(["$templateCache",function(a){a.put("calendar/views/eventBox.html",'<div class="event">\n  <p class="title">Sample Item</p>\n\n  <p class="location">Sample Location </p>\n\n</div>')}]),angular.module("calendar/views/timeline.html",[]).run(["$templateCache",function(a){a.put("calendar/views/timeline.html",'<div class="timeline">\n  <div>\n    <ul>\n      <li ng-repeat="hour in timeline">\n        <div class="hourpoint">\n          <span class="view_hour">{{ hour|h12 }}:00</span>\n          <span class="light view_zone">{{ hour|midday }}</span>\n        </div>\n        <div class="hourpoint">\n          <span ng-if="!$last" class="fr light view_h_hour">{{ hour|h12 }}:30</span>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>')}]);